<!DOCTYPE html>
<html>
<head><title>/Tests/MetricsAndEventsIntegrationTests.cs</title></head>

<style>
.num {
  text-align:right;
  padding-right:3px;
  font-size:80%;
}
.hit-count-good {
  background-color:#73b973;
}
.hit-count-bad {
  background-color:#ff7373;
}
.code {
  font-family:monospace;
}
.nm-cov-good {
  background-color:#a2d0a2;
}
.nm-cov-bad {
  background-color:#ffa2a2;
}
pre {
  margin:0px;
}
body {
  font-family:sans-serif;
}
</style>
<body>
<table cellspacing='0' cellpadding='0'>
<tr><td class='num'>1&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>using System;</span></pre></td></tr>
<tr><td class='num'>2&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>using System.Configuration;</span></pre></td></tr>
<tr><td class='num'>3&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>using System.Threading;</span></pre></td></tr>
<tr><td class='num'>4&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>using System.Text.RegularExpressions;</span></pre></td></tr>
<tr><td class='num'>5&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>using NUnit.Framework;</span></pre></td></tr>
<tr><td class='num'>6&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>using StatsdClient;</span></pre></td></tr>
<tr><td class='num'>7&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>using Tests.Helpers;</span></pre></td></tr>
<tr><td class='num'>8&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>9&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>10&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>namespace Tests</span></pre></td></tr>
<tr><td class='num'>11&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>{</span></pre></td></tr>
<tr><td class='num'>12&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>    [TestFixture]</span></pre></td></tr>
<tr><td class='num'>13&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>    public class MetricsAndEventsIntegrationTests</span></pre></td></tr>
<tr><td class='num'>14&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>    {</span></pre></td></tr>
<tr><td class='num'>15&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        private UdpListener udpListener;</span></pre></td></tr>
<tr><td class='num'>16&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        private Thread listenThread;</span></pre></td></tr>
<tr><td class='num'>17&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        private int serverPort = Convert.ToInt32(ConfigurationManager.AppSettings[&quot;StatsdServerPort&quot;]);</span></pre></td></tr>
<tr><td class='num'>18&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        private string serverName = ConfigurationManager.AppSettings[&quot;StatsdServerName&quot;];</span></pre></td></tr>
<tr><td class='num'>19&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>20&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [TestFixtureSetUp]</span></pre></td></tr>
<tr><td class='num'>21&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void SetUpUdpListener()</span></pre></td></tr>
<tr><td class='num'>22&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>23&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            udpListener = new UdpListener(serverName, serverPort);</span></pre></td></tr>
<tr><td class='num'>24&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            var metricsConfig = new StatsdConfig { StatsdServerName = serverName, StatsdPort = serverPort};</span></pre></td></tr>
<tr><td class='num'>25&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            StatsdClient.DogStatsd.Configure(metricsConfig);</span></pre></td></tr>
<tr><td class='num'>26&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>27&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>28&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [TestFixtureTearDown]</span></pre></td></tr>
<tr><td class='num'>29&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void TearDownUdpListener()</span></pre></td></tr>
<tr><td class='num'>30&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>31&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            udpListener.Dispose();</span></pre></td></tr>
<tr><td class='num'>32&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>33&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>34&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [SetUp]</span></pre></td></tr>
<tr><td class='num'>35&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void StartUdpListenerThread()</span></pre></td></tr>
<tr><td class='num'>36&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>37&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            listenThread = new Thread(new ParameterizedThreadStart(udpListener.Listen));</span></pre></td></tr>
<tr><td class='num'>38&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            listenThread.Start();</span></pre></td></tr>
<tr><td class='num'>39&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>40&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>41&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [TearDown]</span></pre></td></tr>
<tr><td class='num'>42&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void ClearUdpListenerMessages()</span></pre></td></tr>
<tr><td class='num'>43&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>44&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            udpListener.GetAndClearLastMessages(); // just to be sure that nothing is left over</span></pre></td></tr>
<tr><td class='num'>45&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>46&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>47&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        // Test helper. Waits until the listener is done receiving a message,</span></pre></td></tr>
<tr><td class='num'>48&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        // then asserts that the passed string is equal to the message received.</span></pre></td></tr>
<tr><td class='num'>49&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        private void AssertWasReceived(string shouldBe, int index = 0)</span></pre></td></tr>
<tr><td class='num'>50&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>51&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // Stall until the the listener receives a message or times out </span></pre></td></tr>
<tr><td class='num'>52&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            while (listenThread.IsAlive) ;</span></pre></td></tr>
<tr><td class='num'>53&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            Assert.AreEqual(shouldBe, udpListener.GetAndClearLastMessages()[index]);</span></pre></td></tr>
<tr><td class='num'>54&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>55&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>56&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        // Test helper. Waits until the listener is done receiving a message,</span></pre></td></tr>
<tr><td class='num'>57&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        // then asserts that the passed regular expression matches the received message.</span></pre></td></tr>
<tr><td class='num'>58&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        private void AssertWasReceivedMatches(string pattern, int index = 0)</span></pre></td></tr>
<tr><td class='num'>59&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>60&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // Stall until the the listener receives a message or times out</span></pre></td></tr>
<tr><td class='num'>61&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            while (listenThread.IsAlive) ;</span></pre></td></tr>
<tr><td class='num'>62&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            StringAssert.IsMatch(pattern, udpListener.GetAndClearLastMessages()[index]);</span></pre></td></tr>
<tr><td class='num'>63&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>64&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>65&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>66&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>67&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void _udp_listener_sanity_test()</span></pre></td></tr>
<tr><td class='num'>68&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>69&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            var client = new StatsdUDP(ConfigurationManager.AppSettings[&quot;StatsdServerName&quot;],</span></pre></td></tr>
<tr><td class='num'>70&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                                       Convert.ToInt32(ConfigurationManager.AppSettings[&quot;StatsdServerPort&quot;]));</span></pre></td></tr>
<tr><td class='num'>71&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            client.Send(&quot;iamnotinsane!&quot;);</span></pre></td></tr>
<tr><td class='num'>72&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;iamnotinsane!&quot;);</span></pre></td></tr>
<tr><td class='num'>73&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>74&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>75&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>76&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void counter()</span></pre></td></tr>
<tr><td class='num'>77&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>78&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Counter(&quot;counter&quot;, 1337);</span></pre></td></tr>
<tr><td class='num'>79&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;counter:1337|c&quot;);</span></pre></td></tr>
<tr><td class='num'>80&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>81&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>82&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>83&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>84&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void counter_tags()</span></pre></td></tr>
<tr><td class='num'>85&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>86&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Counter(&quot;counter&quot;, 1, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>87&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;counter:1|c|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>88&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>89&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>90&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>91&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void counter_sample_rate()</span></pre></td></tr>
<tr><td class='num'>92&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>93&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // A sample rate over 1 doesn&#39;t really make sense, but it allows</span></pre></td></tr>
<tr><td class='num'>94&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // the test to pass every time</span></pre></td></tr>
<tr><td class='num'>95&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Counter(&quot;counter&quot;, 1, sampleRate: 1.1);</span></pre></td></tr>
<tr><td class='num'>96&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;counter:1|c|@1.1&quot;);</span></pre></td></tr>
<tr><td class='num'>97&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>98&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>99&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>100&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void counter_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>101&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>102&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Counter(&quot;counter&quot;, 1337, sampleRate: 12.2, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>103&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;counter:1337|c|@12.2|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>104&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>105&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>106&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>107&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void counter_sample_rate_tags_double()</span></pre></td></tr>
<tr><td class='num'>108&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>109&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Counter(&quot;counter&quot;, 1337.3, sampleRate: 12.2, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>110&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;counter:1337.3|c|@12.2|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>111&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>112&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>113&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>114&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void increment()</span></pre></td></tr>
<tr><td class='num'>115&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>116&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Increment(&quot;increment&quot;);</span></pre></td></tr>
<tr><td class='num'>117&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;increment:1|c&quot;);</span></pre></td></tr>
<tr><td class='num'>118&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>119&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>120&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>121&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void increment_tags()</span></pre></td></tr>
<tr><td class='num'>122&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>123&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Increment(&quot;increment&quot;, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>124&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;increment:1|c|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>125&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>126&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>127&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>128&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void increment_sample_rate()</span></pre></td></tr>
<tr><td class='num'>129&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>130&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Increment(&quot;increment&quot;, sampleRate: 1.1);</span></pre></td></tr>
<tr><td class='num'>131&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;increment:1|c|@1.1&quot;);</span></pre></td></tr>
<tr><td class='num'>132&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>133&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>134&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>135&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void increment_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>136&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>137&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Increment(&quot;increment&quot;, sampleRate: 12.2, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>138&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;increment:1|c|@12.2|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>139&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>140&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>141&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>142&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void decrement()</span></pre></td></tr>
<tr><td class='num'>143&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>144&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Decrement(&quot;decrement&quot;);</span></pre></td></tr>
<tr><td class='num'>145&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;decrement:-1|c&quot;);</span></pre></td></tr>
<tr><td class='num'>146&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>147&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>148&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>149&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void decrement_tags()</span></pre></td></tr>
<tr><td class='num'>150&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>151&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Decrement(&quot;decrement&quot;, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>152&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;decrement:-1|c|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>153&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>154&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>155&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>156&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void decrement_sample_rate()</span></pre></td></tr>
<tr><td class='num'>157&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>158&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Decrement(&quot;decrement&quot;, sampleRate: 1.1);</span></pre></td></tr>
<tr><td class='num'>159&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;decrement:-1|c|@1.1&quot;);</span></pre></td></tr>
<tr><td class='num'>160&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>161&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>162&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>163&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void decrement_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>164&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>165&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Decrement(&quot;decrement&quot;, sampleRate: 12.2, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>166&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;decrement:-1|c|@12.2|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>167&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>168&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>169&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>170&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void gauge()</span></pre></td></tr>
<tr><td class='num'>171&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>172&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Gauge(&quot;gauge&quot;, 1337);</span></pre></td></tr>
<tr><td class='num'>173&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;gauge:1337|g&quot;);</span></pre></td></tr>
<tr><td class='num'>174&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>175&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>176&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>177&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void gauge_tags()</span></pre></td></tr>
<tr><td class='num'>178&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>179&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Gauge(&quot;gauge&quot;, 1337, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>180&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;gauge:1337|g|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>181&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>182&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>183&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>184&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void gauge_sample_rate()</span></pre></td></tr>
<tr><td class='num'>185&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>186&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Gauge(&quot;gauge&quot;, 1337, sampleRate: 1.1);</span></pre></td></tr>
<tr><td class='num'>187&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;gauge:1337|g|@1.1&quot;);</span></pre></td></tr>
<tr><td class='num'>188&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>189&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>190&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>191&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void gauge_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>192&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>193&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Gauge(&quot;gauge&quot;, 1337, sampleRate: 1.1, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>194&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;gauge:1337|g|@1.1|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>195&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>196&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>197&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>198&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void gauge_double()</span></pre></td></tr>
<tr><td class='num'>199&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>200&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Gauge(&quot;gauge&quot;, 6.3);</span></pre></td></tr>
<tr><td class='num'>201&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;gauge:6.3|g&quot;);</span></pre></td></tr>
<tr><td class='num'>202&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>203&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>204&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>205&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void gauge_double_tags()</span></pre></td></tr>
<tr><td class='num'>206&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>207&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Gauge(&quot;gauge&quot;, 3.1337, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>208&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;gauge:3.1337|g|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>209&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>210&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>211&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>212&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void gauge_double_sample_rate()</span></pre></td></tr>
<tr><td class='num'>213&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>214&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Gauge(&quot;gauge&quot;, 3.1337, sampleRate: 1.1);</span></pre></td></tr>
<tr><td class='num'>215&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;gauge:3.1337|g|@1.1&quot;);</span></pre></td></tr>
<tr><td class='num'>216&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>217&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>218&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>219&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void gauge_double_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>220&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>221&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Gauge(&quot;gauge&quot;, 3.1337, sampleRate: 1.1, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>222&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;gauge:3.1337|g|@1.1|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>223&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>224&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>225&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>226&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void gauge_double_rounding()</span></pre></td></tr>
<tr><td class='num'>227&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>228&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Gauge(&quot;gauge&quot;, (double)1 / 9);</span></pre></td></tr>
<tr><td class='num'>229&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;gauge:0.111111111111111|g&quot;);</span></pre></td></tr>
<tr><td class='num'>230&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>231&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>232&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>233&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void histogram()</span></pre></td></tr>
<tr><td class='num'>234&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>235&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Histogram(&quot;histogram&quot;, 42);</span></pre></td></tr>
<tr><td class='num'>236&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;histogram:42|h&quot;);</span></pre></td></tr>
<tr><td class='num'>237&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>238&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>239&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>240&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void histogram_tags()</span></pre></td></tr>
<tr><td class='num'>241&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>242&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Histogram(&quot;histogram&quot;, 42, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>243&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;histogram:42|h|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>244&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>245&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>246&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>247&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void histogram_sample_rate()</span></pre></td></tr>
<tr><td class='num'>248&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>249&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Histogram(&quot;histogram&quot;, 42, sampleRate: 1.1);</span></pre></td></tr>
<tr><td class='num'>250&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;histogram:42|h|@1.1&quot;);</span></pre></td></tr>
<tr><td class='num'>251&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>252&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>253&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>254&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void histogram_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>255&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>256&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Histogram(&quot;histogram&quot;, 42, sampleRate: 1.1, tags: new[] { &quot;tag1:true,tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>257&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;histogram:42|h|@1.1|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>258&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>259&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>260&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>261&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void histogram_double()</span></pre></td></tr>
<tr><td class='num'>262&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>263&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Histogram(&quot;histogram&quot;, 42.1);</span></pre></td></tr>
<tr><td class='num'>264&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;histogram:42.1|h&quot;);</span></pre></td></tr>
<tr><td class='num'>265&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>266&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>267&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>268&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void histogram_double_tags()</span></pre></td></tr>
<tr><td class='num'>269&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>270&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Histogram(&quot;histogram&quot;, 42.1, tags: new[] { &quot;tag1:true,tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>271&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;histogram:42.1|h|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>272&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>273&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>274&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>275&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void histogram_double_sample_rate()</span></pre></td></tr>
<tr><td class='num'>276&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>277&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Histogram(&quot;histogram&quot;, 42.1, 1.1);</span></pre></td></tr>
<tr><td class='num'>278&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;histogram:42.1|h|@1.1&quot;);</span></pre></td></tr>
<tr><td class='num'>279&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>280&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>281&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>282&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void histogram_double_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>283&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>284&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Histogram(&quot;histogram&quot;, 42.1, sampleRate: 1.1, tags: new[] { &quot;tag1:true,tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>285&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;histogram:42.1|h|@1.1|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>286&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>287&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>288&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>289&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void set()</span></pre></td></tr>
<tr><td class='num'>290&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>291&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Set(&quot;set&quot;, 42);</span></pre></td></tr>
<tr><td class='num'>292&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;set:42|s&quot;);</span></pre></td></tr>
<tr><td class='num'>293&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>294&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>295&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>296&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void set_tags()</span></pre></td></tr>
<tr><td class='num'>297&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>298&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Set(&quot;set&quot;, 42, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>299&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;set:42|s|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>300&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>301&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>302&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>303&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void set_sample_rate()</span></pre></td></tr>
<tr><td class='num'>304&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>305&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Set(&quot;set&quot;, 42, sampleRate: 1.1);</span></pre></td></tr>
<tr><td class='num'>306&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;set:42|s|@1.1&quot;);</span></pre></td></tr>
<tr><td class='num'>307&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>308&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>309&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>310&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void set_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>311&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>312&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Set(&quot;set&quot;, 42, sampleRate: 12.2, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>313&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;set:42|s|@12.2|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>314&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>315&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>316&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>317&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void set_double()</span></pre></td></tr>
<tr><td class='num'>318&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>319&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Set(&quot;set&quot;, 42.2);</span></pre></td></tr>
<tr><td class='num'>320&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;set:42.2|s&quot;);</span></pre></td></tr>
<tr><td class='num'>321&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>322&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>323&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>324&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void set_double_tags()</span></pre></td></tr>
<tr><td class='num'>325&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>326&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Set(&quot;set&quot;, 42.2, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>327&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;set:42.2|s|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>328&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>329&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>330&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>331&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void set_double_sample_rate()</span></pre></td></tr>
<tr><td class='num'>332&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>333&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Set(&quot;set&quot;, 42.2, sampleRate: 1.1);</span></pre></td></tr>
<tr><td class='num'>334&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;set:42.2|s|@1.1&quot;);</span></pre></td></tr>
<tr><td class='num'>335&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>336&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>337&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>338&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void set_double_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>339&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>340&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Set(&quot;set&quot;, 42.2, sampleRate: 12.2, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>341&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;set:42.2|s|@12.2|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>342&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>343&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>344&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>345&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void set_string()</span></pre></td></tr>
<tr><td class='num'>346&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>347&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Set(&quot;set&quot;, &quot;string&quot;);</span></pre></td></tr>
<tr><td class='num'>348&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;set:string|s&quot;);</span></pre></td></tr>
<tr><td class='num'>349&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>350&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>351&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>352&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void set_string_tags()</span></pre></td></tr>
<tr><td class='num'>353&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>354&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Set(&quot;set&quot;, &quot;string&quot;, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>355&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;set:string|s|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>356&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>357&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>358&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>359&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void set_string_sample_rate()</span></pre></td></tr>
<tr><td class='num'>360&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>361&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Set(&quot;set&quot;, &quot;string&quot;, sampleRate: 1.1);</span></pre></td></tr>
<tr><td class='num'>362&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;set:string|s|@1.1&quot;);</span></pre></td></tr>
<tr><td class='num'>363&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>364&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>365&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>366&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void set_string_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>367&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>368&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Set(&quot;set&quot;, &quot;string&quot;, sampleRate: 12.2, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>369&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;set:string|s|@12.2|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>370&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>371&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>372&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>373&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer()</span></pre></td></tr>
<tr><td class='num'>374&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>375&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Timer(&quot;someevent&quot;, 999);</span></pre></td></tr>
<tr><td class='num'>376&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;someevent:999|ms&quot;);</span></pre></td></tr>
<tr><td class='num'>377&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>378&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>379&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>380&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_tags()</span></pre></td></tr>
<tr><td class='num'>381&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>382&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Timer(&quot;someevent&quot;, 999, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>383&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;someevent:999|ms|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>384&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>385&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>386&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>387&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_sample_rate()</span></pre></td></tr>
<tr><td class='num'>388&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>389&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Timer(&quot;someevent&quot;, 999, sampleRate: 1.1);</span></pre></td></tr>
<tr><td class='num'>390&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;someevent:999|ms|@1.1&quot;);</span></pre></td></tr>
<tr><td class='num'>391&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>392&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>393&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>394&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>395&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>396&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Timer(&quot;someevent&quot;, 999, sampleRate: 1.1, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>397&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;someevent:999|ms|@1.1|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>398&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>399&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>400&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>401&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_double()</span></pre></td></tr>
<tr><td class='num'>402&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>403&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Timer(&quot;someevent&quot;, 999.99);</span></pre></td></tr>
<tr><td class='num'>404&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;someevent:999.99|ms&quot;);</span></pre></td></tr>
<tr><td class='num'>405&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>406&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>407&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>408&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_double_tags()</span></pre></td></tr>
<tr><td class='num'>409&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>410&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Timer(&quot;someevent&quot;, 999.99, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>411&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;someevent:999.99|ms|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>412&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>413&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>414&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>415&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_double_sample_rate()</span></pre></td></tr>
<tr><td class='num'>416&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>417&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Timer(&quot;someevent&quot;, 999.99, sampleRate: 1.1);</span></pre></td></tr>
<tr><td class='num'>418&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;someevent:999.99|ms|@1.1&quot;);</span></pre></td></tr>
<tr><td class='num'>419&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>420&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>421&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>422&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_double_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>423&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>424&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Timer(&quot;someevent&quot;, 999.99, sampleRate: 1.1, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>425&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;someevent:999.99|ms|@1.1|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>426&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>427&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>428&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>429&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_method()</span></pre></td></tr>
<tr><td class='num'>430&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>431&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Time(() =&gt; Thread.Sleep(500), &quot;timer&quot;);</span></pre></td></tr>
<tr><td class='num'>432&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // Make sure that the received timer is of the right order of magnitude.</span></pre></td></tr>
<tr><td class='num'>433&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // The measured value will probably be a few ms longer than the sleep value.</span></pre></td></tr>
<tr><td class='num'>434&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;timer:\d{3}\|ms&quot;);</span></pre></td></tr>
<tr><td class='num'>435&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>436&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>437&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>438&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_method_tags()</span></pre></td></tr>
<tr><td class='num'>439&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>440&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Time(() =&gt; Thread.Sleep(500), &quot;timer&quot;, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>441&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // Make sure that the received timer is of the right order of magnitude.</span></pre></td></tr>
<tr><td class='num'>442&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // The measured value will probably be a few ms longer than the sleep value.</span></pre></td></tr>
<tr><td class='num'>443&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;timer:\d{3}\|ms\|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>444&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>445&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>446&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>447&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_method_sample_rate()</span></pre></td></tr>
<tr><td class='num'>448&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>449&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Time(() =&gt; Thread.Sleep(500), &quot;timer&quot;, sampleRate: 1.1);</span></pre></td></tr>
<tr><td class='num'>450&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // Make sure that the received timer is of the right order of magnitude.</span></pre></td></tr>
<tr><td class='num'>451&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // The measured value will probably be a few ms longer than the sleep value.</span></pre></td></tr>
<tr><td class='num'>452&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;timer:\d{3}\|ms\|@1\.1&quot;);</span></pre></td></tr>
<tr><td class='num'>453&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>454&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>455&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>456&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_method_sample_rate_tags()</span></pre></td></tr>
<tr><td class='num'>457&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>458&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Time(() =&gt; Thread.Sleep(500), &quot;timer&quot;, sampleRate: 1.1, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; });</span></pre></td></tr>
<tr><td class='num'>459&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // Make sure that the received timer is of the right order of magnitude.</span></pre></td></tr>
<tr><td class='num'>460&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // The measured value will probably be a few ms longer than the sleep value.</span></pre></td></tr>
<tr><td class='num'>461&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;timer:\d{3}\|ms\|@1\.1\|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>462&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>463&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>464&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        // [Helper]</span></pre></td></tr>
<tr><td class='num'>465&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        private int pauseAndReturnInt()</span></pre></td></tr>
<tr><td class='num'>466&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>467&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            Thread.Sleep(500);</span></pre></td></tr>
<tr><td class='num'>468&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            return 42;</span></pre></td></tr>
<tr><td class='num'>469&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>470&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>471&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>472&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_method_sets_return_value()</span></pre></td></tr>
<tr><td class='num'>473&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>474&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            var returnValue = DogStatsd.Time(() =&gt; pauseAndReturnInt(), &quot;lifetheuniverseandeverything&quot;);</span></pre></td></tr>
<tr><td class='num'>475&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;lifetheuniverseandeverything:\d{3}\|ms&quot;);</span></pre></td></tr>
<tr><td class='num'>476&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            Assert.AreEqual(42, returnValue);</span></pre></td></tr>
<tr><td class='num'>477&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>478&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>479&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>480&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_method_sets_return_value_tags()</span></pre></td></tr>
<tr><td class='num'>481&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>482&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            var returnValue = DogStatsd.Time(() =&gt; pauseAndReturnInt(), &quot;lifetheuniverseandeverything&quot;, tags: new[] { &quot;towel:present&quot; });</span></pre></td></tr>
<tr><td class='num'>483&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;lifetheuniverseandeverything:\d{3}\|ms\|#towel:present&quot;);</span></pre></td></tr>
<tr><td class='num'>484&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            Assert.AreEqual(42, returnValue);</span></pre></td></tr>
<tr><td class='num'>485&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>486&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>487&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>488&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_method_sets_return_value_sample_rate()</span></pre></td></tr>
<tr><td class='num'>489&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>490&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            var returnValue = DogStatsd.Time(() =&gt; pauseAndReturnInt(), &quot;lifetheuniverseandeverything&quot;, sampleRate: 4.2);</span></pre></td></tr>
<tr><td class='num'>491&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;lifetheuniverseandeverything:\d{3}\|ms\|@4\.2&quot;);</span></pre></td></tr>
<tr><td class='num'>492&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            Assert.AreEqual(42, returnValue);</span></pre></td></tr>
<tr><td class='num'>493&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>494&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>495&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>496&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_method_sets_return_value_sample_rate_and_tag()</span></pre></td></tr>
<tr><td class='num'>497&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>498&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            var returnValue = DogStatsd.Time(() =&gt; pauseAndReturnInt(), &quot;lifetheuniverseandeverything&quot;, sampleRate: 4.2, tags: new[] { &quot;fjords&quot; });</span></pre></td></tr>
<tr><td class='num'>499&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;lifetheuniverseandeverything:\d{3}\|ms\|@4\.2\|#fjords&quot;);</span></pre></td></tr>
<tr><td class='num'>500&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            Assert.AreEqual(42, returnValue);</span></pre></td></tr>
<tr><td class='num'>501&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>502&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>503&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        // [Helper]</span></pre></td></tr>
<tr><td class='num'>504&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        private int throwException()</span></pre></td></tr>
<tr><td class='num'>505&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>506&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            Thread.Sleep(500);</span></pre></td></tr>
<tr><td class='num'>507&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            throw new Exception(&quot;test exception&quot;);</span></pre></td></tr>
<tr><td class='num'>508&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>509&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>510&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>511&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_method_doesnt_swallow_exception_and_submits_metric()</span></pre></td></tr>
<tr><td class='num'>512&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>513&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            Assert.Throws&lt;Exception&gt;(() =&gt; DogStatsd.Time(() =&gt; throwException(), &quot;somebadcode&quot;));</span></pre></td></tr>
<tr><td class='num'>514&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;somebadcode:\d{3}\|ms&quot;);</span></pre></td></tr>
<tr><td class='num'>515&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>516&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>517&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>518&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_block()</span></pre></td></tr>
<tr><td class='num'>519&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>520&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            using (DogStatsd.StartTimer(&quot;timer&quot;))</span></pre></td></tr>
<tr><td class='num'>521&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            {</span></pre></td></tr>
<tr><td class='num'>522&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                Thread.Sleep(200);</span></pre></td></tr>
<tr><td class='num'>523&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                Thread.Sleep(300);</span></pre></td></tr>
<tr><td class='num'>524&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            }</span></pre></td></tr>
<tr><td class='num'>525&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;timer:\d{3}\|ms&quot;);</span></pre></td></tr>
<tr><td class='num'>526&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>527&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>528&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>529&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_block_tags()</span></pre></td></tr>
<tr><td class='num'>530&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>531&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            using (DogStatsd.StartTimer(&quot;timer&quot;, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; }))</span></pre></td></tr>
<tr><td class='num'>532&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            {</span></pre></td></tr>
<tr><td class='num'>533&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                Thread.Sleep(200);</span></pre></td></tr>
<tr><td class='num'>534&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                Thread.Sleep(300);</span></pre></td></tr>
<tr><td class='num'>535&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            }</span></pre></td></tr>
<tr><td class='num'>536&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;timer:\d{3}\|ms\|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>537&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>538&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>539&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>540&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_block_sampleRate()</span></pre></td></tr>
<tr><td class='num'>541&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>542&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            using (DogStatsd.StartTimer(&quot;timer&quot;, sampleRate: 1.1))</span></pre></td></tr>
<tr><td class='num'>543&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            {</span></pre></td></tr>
<tr><td class='num'>544&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                Thread.Sleep(200);</span></pre></td></tr>
<tr><td class='num'>545&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                Thread.Sleep(300);</span></pre></td></tr>
<tr><td class='num'>546&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            }</span></pre></td></tr>
<tr><td class='num'>547&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;timer:\d{3}\|ms\|@1\.1&quot;);</span></pre></td></tr>
<tr><td class='num'>548&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>549&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>550&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>551&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_block_sampleRate_and_tag()</span></pre></td></tr>
<tr><td class='num'>552&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>553&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            using (DogStatsd.StartTimer(&quot;timer&quot;, sampleRate: 1.1, tags: new[] { &quot;tag1:true&quot;, &quot;tag2&quot; }))</span></pre></td></tr>
<tr><td class='num'>554&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            {</span></pre></td></tr>
<tr><td class='num'>555&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                Thread.Sleep(200);</span></pre></td></tr>
<tr><td class='num'>556&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                Thread.Sleep(300);</span></pre></td></tr>
<tr><td class='num'>557&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            }</span></pre></td></tr>
<tr><td class='num'>558&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceivedMatches(@&quot;timer:\d{3}\|ms\|@1\.1\|#tag1:true,tag2&quot;);</span></pre></td></tr>
<tr><td class='num'>559&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>560&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>561&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>562&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>563&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void timer_block_doesnt_swallow_exception_and_submits_metric()</span></pre></td></tr>
<tr><td class='num'>564&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>565&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            // (Wasn&#39;t able to get this working with Assert.Throws)</span></pre></td></tr>
<tr><td class='num'>566&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            try</span></pre></td></tr>
<tr><td class='num'>567&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            {</span></pre></td></tr>
<tr><td class='num'>568&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                using (DogStatsd.StartTimer(&quot;timer&quot;))</span></pre></td></tr>
<tr><td class='num'>569&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                {</span></pre></td></tr>
<tr><td class='num'>570&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                    throwException();</span></pre></td></tr>
<tr><td class='num'>571&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                }</span></pre></td></tr>
<tr><td class='num'>572&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                Assert.Fail();</span></pre></td></tr>
<tr><td class='num'>573&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            }</span></pre></td></tr>
<tr><td class='num'>574&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            catch (Exception)</span></pre></td></tr>
<tr><td class='num'>575&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            {</span></pre></td></tr>
<tr><td class='num'>576&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                AssertWasReceivedMatches(@&quot;timer:\d{3}\|ms&quot;);</span></pre></td></tr>
<tr><td class='num'>577&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>                Assert.Pass();</span></pre></td></tr>
<tr><td class='num'>578&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            }</span></pre></td></tr>
<tr><td class='num'>579&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>580&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        </span></pre></td></tr>
<tr><td class='num'>581&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>582&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void events_priority_and_date()</span></pre></td></tr>
<tr><td class='num'>583&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>584&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Event(&quot;Title&quot;, &quot;L1\r\nL2&quot;, priority: &quot;low&quot;, dateHappened: 1375296969);</span></pre></td></tr>
<tr><td class='num'>585&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;_e{5,6}:Title|L1\\nL2|d:1375296969|p:low&quot;);</span></pre></td></tr>
<tr><td class='num'>586&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>587&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
<tr><td class='num'>588&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        [Test]</span></pre></td></tr>
<tr><td class='num'>589&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        public void events_aggregation_key_and_tags()</span></pre></td></tr>
<tr><td class='num'>590&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        {</span></pre></td></tr>
<tr><td class='num'>591&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            DogStatsd.Event(&quot;Title&quot;, &quot; &#248;U &#248;U &#165;&#186;u T0&#181; &quot;, aggregationKey: &quot;key&quot;, tags: new[] { &quot;t1&quot;, &quot;t2:v2&quot; });</span></pre></td></tr>
<tr><td class='num'>592&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>            AssertWasReceived(&quot;_e{5,19}:Title| &#248;U &#248;U &#165;&#186;u T0&#181; |k:key|#t1,t2:v2&quot;);</span></pre></td></tr>
<tr><td class='num'>593&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>        }</span></pre></td></tr>
<tr><td class='num'>594&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>    }</span></pre></td></tr>
<tr><td class='num'>595&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'>}</span></pre></td></tr>
<tr><td class='num'>596&nbsp;</td><td class='num'>&nbsp;&nbsp;</td><td><pre><span class='code'></span></pre></td></tr>
</table>
</body>
